+14 - Огляд Spring-платформи, Обробка HTTP запитів на Spring
{t 55-46} [in-KB spring-2022-07-29-11-13]

https-//www.youtube.com/watch?v=WPbPrhOF7Ss
Огляд Spring-платформи. Обробка HTTP-запитів на Spring замість Servlet API
t 55-46








00-00...03-04

нарезка, не конспектировать








03-25...05-21

Spring упрощает enterprise разработку

типовые задачи backend
-сделать HTTP endpoint
-сделать авторизацию/аутентификацию
-маршаллинг/анмаршаллинг
-обработка ошибок/валидация
-работа с транзакциями
-кэширование данных
-работа с БД
-тестирование
-делать запросы на другеи endoints
-асинхронная работа с сообщениями

мы используем разные проекты спринга в разных частях приложения








05-28...07-33

основа Spring-платформы

в основе лежит spring framework (2001)

Context
AOP
Web MVC
...

SpringBoot
-auto config
-actuator
-embedded tomcat
-starters
-initializer (быстро собирает проект)

SpringBoot построен поверх Spring








07-35...09-38

плавный переход от сервлетов к Spring

создание проекта через Spring Initializr (start.spring.io)

Spring Web
Lombok

можно этот же Initializr юзать через idea








10-13...14-20

создаём контроллер

@RestController
@RequestMapping("/url")

HttpServletRequest/Response

req.getReader();

как можно вручную обработать POST запрос

Collectors.joining()

ObjectMapper

putIfAbsent








14-22...16-38

как можно вручную обработать GET запрос

entrySet().foreach(...)








17-18...18-54

Spring vs Servlets

Spring MVC даёт инструменты для обработки HTTP запросов

Spring MVC работаёт поверх сервлетов

преимущества Spring Boot

сборка проекта за 3 секунды со всеми зависимостями (стартер-пакет)

есть готовый стартер-метод main,
при вызове которого Spring Boot сам собирает проект,
запускает встроенный Tomcat контейнер,
и сам себя в этот контейнер деплоит








19-00...21-05

поскольку Spring MVC работает на сервлетах, то и мы можем писать на них

в body запроса есть JSON и нужно его смапить в объект

@RequestBody User user

Spring значительно уменьшает количество кода








22-12...25-10

метод может возвращать что угодно, например Stream<String>, List<String>

Collectors.joining("<br>") возвращает стрингу








25-18...26-14

как удобно получить доступ к HttpServletRequest

можно вынести его в поле и заавтовайрить








26-18...29-03
29-22...30-50
31-07...32-18

как реализовать сессию на Spring

req.getSession();
это в Servlet API

@Component
Spring создаёт инстанс этого класса

@SessionScope

/.idea/httpRequests/http-client.cookies
здесь хранятся куки мменя как клиента








33-24...38-35

как сессия работает под капотом

HttpSession

атрибуты сессии

@SessinAttribute("attrName")
для чтения из сессии








38-38...41-48

как получить доступ к cookie

@CookieValue("JSESSIONID") String sessionId
кк параметр метода




42-32...44-20

итоги, основные моменты

заавтовайренные поля - это запроксированные объекты,
которые хранятся в ThreadLocal

этопозволяет иметь 1 инстанс на 1 сессию

когда мы возвращаем из метода User,
то Spring берёт этого юзера,
перемапливает в JSON и отправляет уже JSON








44-36...49-42

история о SpringOne конференции

выступают авторы фреймворков








49-51...53-23

как Тарса сдавал сертификат на Spring Professional (от Pivotal)

ключевая идея в изучении Spring-платформы

понимание основ - как что работает под капотом








53-28...55-40

3 направления обучения

1) проблематика

проблема линкования множества объектов между собой -
используем паттерн IoC и делаем DI

2) разбор внутренних деталей реализации Spring

3) использование инструментария и лучшие практики








всё
----------







